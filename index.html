<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Survival Switch – 訓練コード送信</title>
  <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
  <style>
    :root{ --bg:#0A0A0A; --primary:#FF4405; --white:#FFFFFF; --text:#0A0A0A; }
    html,body{margin:0;height:100%;background:var(--bg);font-family:system-ui,-apple-system,Segoe UI,Roboto}
    .wrap{min-height:100%;display:grid;place-items:center}
    .card{background:var(--white);color:var(--text);width:min(520px,92vw);
      padding:28px;border-radius:18px;box-shadow:0 10px 24px rgba(0,0,0,.25)}
    h1{font-size:20px;margin:0 0 6px}
    p{opacity:.8;margin:0 0 18px;line-height:1.6}
    button{width:100%;padding:16px 18px;border-radius:12px;border:none;cursor:pointer;
      background:var(--primary);color:var(--white);font-weight:700;font-size:16px}
    .note{font-size:12px;opacity:.7;margin-top:10px}
    .hidden{display:none}
  </style>
</head>
<body>
<div class="wrap">
  <div class="card">
    <h1>訓練コードの送信</h1>
    <p>ボタンを押すと、このトークに訓練コードを送ります。</p>
    <button id="sendBtn">訓練コードを送信する</button>
    <div id="done" class="hidden note">送信しました。トーク画面を確認してください。</div>
    <div id="warn" class="hidden note">LINEアプリ内から開いてください（外部ブラウザでは送信できません）。</div>
  </div>
</div>

<script>
  const LIFF_ID = "【後で置換】";      // ← LINEコンソールで取得してから入れる
  const TRAIN_CODE = "ss-train-123";  // まずは固定でテスト

  const $ = (id)=>document.getElementById(id);

  (async () => {
    try{
      await liff.init({ liffId: LIFF_ID });
      if (!liff.isInClient()) $("warn").classList.remove("hidden");
      $("sendBtn").onclick = async () => {
        await liff.sendMessages([{ type: "text", text: TRAIN_CODE }]);
        $("done").classList.remove("hidden");
      };
    }catch(e){ alert("LIFF初期化に失敗: " + (e?.message || e)); }
  })();
</script>
</body>
</html>
